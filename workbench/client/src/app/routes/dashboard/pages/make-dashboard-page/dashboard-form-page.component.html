<h1>Create Dashboard</h1>
<form
  [formGroup]="formGroup"
  (ngSubmit)="submit()"
  class="section elevate p-8 space-y-8"
>
  <label
    class="input input-bordered flex items-center gap-4"
  >
    Name:
    <input
      formControlName="name"
      type="text"
      placeholder="Input dashboard name"
      class="grow"
    />
  </label>
  <div class="space-y-4">
    <h3>Select a Query</h3>
    <etri-query-select
      formControlName="query_id"
      (onExecute)="executeQuery($event)"
    />
  </div>

  @if (queryData()) {
    <etri-dashboard-item-input
      [data]="queryData()!"
      formControlName="items"
    />
  } @else {
    <p class="text-zinc-500 text-sm">쿼리를 선택 후 실행해주세요.</p>
  }

  <div class="flex gap-4">
    <button
      type="button"
      routerLink="/dashboard"
      class="btn grow no-underline"
    >Cancel
    </button>
    <button
      [disabled]="formGroup.invalid"
      class="btn btn-primary grow text-white disabled:btn-disabled"
    >
      @if (submitting) {
        <etri-loading size="xs"></etri-loading>
      } @else {
        Register
      }
    </button>
  </div>
</form>
